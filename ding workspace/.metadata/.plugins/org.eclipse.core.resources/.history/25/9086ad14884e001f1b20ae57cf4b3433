/*
 * interrupts.c
 *
 *  Created on: Jul 30, 2024
 *      Author: hzaib
 */




#include "Defines.h"
#include <ti/drivers/dpl/ClockP.h>
#include <ti/drivers/Timer.h>




  void timer_callback(Timer_Handle handle, int_fast16_t status)
  {

      if(devInfoConfirmationFlag == 1)
       {
          devInfoConfirmationTimer++;

          if(devInfoConfirmationTimer > 6000)
          {
              devInfoConfirmationTimer = 0;
              devInfoConfirmationMail = 1;

          }

       }

  }



  void timer_init()
  {
      Timer_Handle timer0;
       Timer_Params params;

       Timer_Params_init(&params);
       params.period        = 1*1000;
       params.periodUnits   = Timer_PERIOD_US;
       params.timerMode     = Timer_CONTINUOUS_CALLBACK;
       params.timerCallback = timer_callback;

       timer0 = Timer_open(CONFIG_TIMER_0, &params);

       if (timer0 == NULL)
       {
           /* Failed to initialized timer */
           while (1) {}
       }

       if (Timer_start(timer0) == Timer_STATUS_ERROR)
       {
           /* Failed to start timer */
           while (1) {}
       }
  }
